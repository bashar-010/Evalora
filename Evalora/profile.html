<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evalora - Profile</title>
    <link rel="stylesheet" href="profile.css">
    <link rel="stylesheet" href="notifications.css">
    <link rel="stylesheet" href="custom-alert.css">
    <!-- Cropper.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <link rel="icon" type="image/png" href="photos/Evaloralogo.png">
</head>

<body>
    <div class="navbar">
        <div class="navbar-left">
            <img src="photos/Evaloralogo.png" alt="StudentLinklogo" width="70px">
        </div>
        <div class="navbar-center" id="navbarCenter">
            <!-- Dynamic Role-Based Navigation -->
        </div>
        <div class="navbar-right">
            <a href="login.html"><button class="nav-Logout">Logout</button></a>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Profile Banner -->
            <div class="profile-banner">
                <div class="profile-info">
                    <div class="profile-img-wrapper">
                        <img src="photos/default-avatar.png" alt="Profile Picture" class="profile-img" id="profileImg">
                        <div class="camera-overlay">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path
                                    d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                                </path>
                                <circle cx="12" cy="13" r="4"></circle>
                            </svg>
                        </div>
                    </div>
                    <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    <div class="profile-text">
                        <div class="profile-name-wrapper">
                            <h2 class="profile-name" id="profileName">Reem Safadi</h2>
                            <button class="edit-name-icon" onclick="openEditProfileModal()" title="Edit Profile">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                        </div>
                        <p class="profile-university" id="profileUniversity">The world islamic science & education
                            university</p>
                        <p class="profile-major" id="profileMajor">Computer science</p>
                        <p class="profile-email" id="profileEmail"
                            style="color: #666; font-size: 14px; margin-top: 5px;">email@example.com</p>
                    </div>
                </div>
                <div class="score-container">
                    <div class="score-circle">
                        <svg width="120" height="120">
                            <circle cx="60" cy="60" r="50" fill="none" stroke="#e5e7eb" stroke-width="8" />
                            <circle cx="60" cy="60" r="50" fill="none" stroke="#006D77" stroke-width="8"
                                stroke-dasharray="314" stroke-dashoffset="78.5" transform="rotate(-90 60 60)"
                                stroke-linecap="round" />
                        </svg>
                        <div class="score-text">
                            <span class="score-number" id="user-score">0</span>
                            <span class="score-total">/100</span>
                        </div>
                    </div>
                    <div class="score-info">
                        <h3>Your Score</h3>
                        <a href="index.html#Ai_section" class="score-link">View how it's calculated</a>
                        <button id="viewAnalysisBtn" class="score-link"
                            style="background:none; border:none; color:#006D77; cursor:pointer; text-decoration:underline; font-size:14px; margin-top:5px; padding:0;">Why
                            this score?</button>
                        <button id="recalculateScoreBtn" class="score-link"
                            style="display:block; background:none; border:none; color:#0c7489; cursor:pointer; text-decoration:none; font-size:13px; margin-top:8px; padding:4px 8px; border:1px solid #0c7489; border-radius:4px;">üîÑ
                            Refresh AI Score</button>
                    </div>
                </div>
            </div>

            <!-- Content Grid -->
            <div class="content-grid">
                <!-- Left Column -->
                <div class="left-column">
                    <!-- Projects Section -->
                    <section class="section">
                        <div class="section-header">
                            <h2>Projects</h2>
                            <button class="add-btn">+ Project</button>
                        </div>
                        <div class="projects-list" id="projectsList">
                            <!-- Project Card 1 -->
                            <div class="project-card">
                                <div class="project-header">
                                    <h3 class="project-title">Portfolio website</h3>
                                    <span class="project-progress">52%</span>
                                </div>
                                <p class="project-description">
                                    A personal website showcasing my web development skills, projects, and experience
                                    with a clean, responsive, and professional design.
                                </p>
                                <div class="project-tags">
                                    <span class="tag tag-html">HTML</span>
                                    <span class="tag tag-css">CSS</span>
                                    <span class="tag tag-js">Javascript</span>
                                </div>
                                <button class="view-btn">View Project</button>
                            </div>

                            <!-- Project Card 2 -->
                            <div class="project-card">
                                <div class="project-header">
                                    <h3 class="project-title">Portfolio website</h3>
                                    <span class="project-progress">52%</span>
                                </div>
                                <p class="project-description">
                                    A personal website showcasing my web development skills, projects, and experience
                                    with a clean, responsive, and professional design.
                                </p>
                                <div class="project-tags">
                                    <span class="tag tag-python">Python</span>
                                    <span class="tag tag-python">Python</span>
                                    <span class="tag tag-python">Python</span>
                                </div>
                                <button class="view-btn">View Project</button>
                            </div>
                        </div>
                    </section>

                    <!-- Activity Section -->
                    <section class="section">
                        <div class="section-header">
                            <h2>Activity</h2>
                            <button class="create-post-btn">Create a post</button>
                        </div>
                        <div class="activity-tabs">
                            <button class="tab-btn active">Posts</button>
                            <button class="tab-btn">Comments</button>
                        </div>
                        <div class="posts-list">
                            <!-- Post 1 -->
                            <div class="post-card">
                                <div class="post-header">
                                    <img src="photos/default-avatar.png" alt="Reem Safadi" class="post-avatar">
                                    <div>
                                        <h4 class="post-author">Reem Safadi</h4>
                                        <p class="post-time">3 days ago</p>
                                    </div>
                                </div>
                                <p class="post-content">
                                    A personal website showcasing my web development skills, projects, and experience
                                    with a clean, responsive, and professional design.
                                </p>
                                <div class="post-footer">
                                    <span class="post-likes">‚ù§Ô∏è 31</span>
                                    <span class="post-comments">5 Comments</span>
                                </div>
                            </div>

                            <!-- Post 2 -->
                            <div class="post-card">
                                <div class="post-header">
                                    <img src="photos/default-avatar.png" alt="Reem Safadi" class="post-avatar">
                                    <div>
                                        <h4 class="post-author">Reem Safadi</h4>
                                        <p class="post-time">3 days ago</p>
                                    </div>
                                </div>
                                <p class="post-content">
                                    A personal website showcasing my web development skills, projects, and experience
                                    with a clean, responsive, and professional design.
                                </p>
                                <div class="post-footer">
                                    <span class="post-likes">‚ù§Ô∏è 31</span>
                                    <span class="post-comments">5 Comments</span>
                                </div>
                            </div>
                        </div>
                        <div class="comments-list" style="display:none;">
                            <p style="text-align:center; padding:20px; color:#666;">No comments yet.</p>
                        </div>
                    </section>
                </div>

                <!-- Right Column -->
                <div class="right-column">
                    <!-- Skills Section -->
                    <section class="section">
                        <h2>Skills</h2>
                        <div class="skills-grid" id="skillsList">
                            <!-- Skills will be loaded here dynamically -->
                        </div>
                        <button class="add-skill-btn">+ Add skill</button>
                    </section>

                    <!-- Achievements Section -->
                    <section class="section">
                        <h2>Achievements & Certificates</h2>
                        <div class="achievements-list">
                            <div class="achievement-item">
                                <span class="achievement-icon">üèÜ</span>
                                <span class="achievement-text">Python Bootcamp Certificate</span>
                            </div>
                            <div class="achievement-item">
                                <span class="achievement-icon">üíª</span>
                                <span class="achievement-text">Hackathon Participant 2023</span>
                            </div>
                        </div>
                        <button class="add-achievement-btn" onclick="openPopup('popup-achievement')">+ Add
                            achievement</button>
                    </section>


                </div>
            </div>
        </div>
    </main>


    <!-- ========= POPUP 2: UPLOAD PROJECT ========= -->
    <div class="popup-overlay" id="popup-upload">
        <div class="popup-box">
            <h2>Upload Your Project</h2>

            <label>Project Name</label>
            <input type="text" id="projectName" placeholder="Enter project name">

            <label>Project Description</label>
            <textarea id="projectDesc" rows="3" placeholder="Enter a brief description"></textarea>

            <label>Upload File</label>
            <input type="file" id="projectFile">

            <p style="text-align:center; margin:10px 0; font-weight:600;">OR</p>

            <label>Technologies (comma separated)</label>
            <input type="text" id="projectTech" placeholder="e.g. HTML, CSS, React">

            <label>Project Link</label>
            <input type="text" id="projectLink" placeholder="https://yourproject.com">

            <label>Does this project belong to a company?</label>
            <select id="projectCompany">
                <option value="">No Company</option>
                <!-- Companies will be loaded dynamically -->
            </select>
            <small style="color: #666; font-size: 0.85rem; display: block; margin-top: 5px;">
                If you select a company, they will need to verify this project before AI scoring.
            </small>

            <div class="popup-buttons">
                <button class="popup-cancel" onclick="closePopup('popup-upload')">Cancel</button>
                <button class="popup-next" onclick="submitProject()">Submit</button>
            </div>
        </div>
    </div>

    <!-- ========= POPUP 3: ADD ACHIEVEMENT ========= -->
    <div class="popup-overlay" id="popup-achievement">
        <div class="popup-box">
            <h2>Add Achievement / Certificate</h2>
            <label>Achievement Title</label>
            <input type="text" id="achTitle" placeholder="e.g. Hackathon Winner, Course Certificate">

            <label>Description (Optional)</label>
            <input type="text" id="achDesc" placeholder="Short description">

            <label>Certificate Link (Optional)</label>
            <input type="text" id="achCert" placeholder="https://link-to-certificate.com">

            <div class="popup-buttons">
                <button class="popup-cancel" onclick="closePopup('popup-achievement')">Cancel</button>
                <button class="popup-next" onclick="submitAchievement()">Add</button>
            </div>
        </div>
    </div>
    </div>

    <!-- ========= POPUP 3: ADD SKILL ========= -->
    <div class="popup-overlay" id="popup-skill">
        <div class="popup-box">
            <h2>Add New Skill</h2>

            <label>Skill Name</label>
            <input type="text" id="skillName" placeholder="e.g. Python, Public Speaking">

            <div class="popup-buttons">
                <button class="popup-cancel" onclick="closePopup('popup-skill')">Cancel</button>
                <button class="popup-next" onclick="submitSkill()">Add</button>
            </div>
        </div>
    </div>
    </div>


    <!-- ========= POPUP 5: PROJECT DETAILS ========= -->
    <div class="popup-overlay" id="popup-project-details">
        <div class="popup-box" style="width: 550px; max-width: 95%;">
            <h2 id="detailProjectTitle">Project Details</h2>

            <div class="detail-grid">
                <div class="detail-item">
                    <h4>Status</h4>
                    <p id="detailProjectStatus">Scored</p>
                </div>
                <div class="detail-item">
                    <h4>AI Score</h4>
                    <p id="detailProjectScore">85%</p>
                </div>
            </div>

            <div class="form-group">
                <label>Description</label>
                <p id="detailProjectDesc"
                    style="font-size: 15px; line-height: 1.6; color: #4B5563; background: #F9FAFB; padding: 15px; border-radius: 8px; border: 1px solid #E5E7EB;">
                </p>
            </div>

            <div class="form-group">
                <label>Technologies</label>
                <div id="detailProjectTech" style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 5px;"></div>
            </div>

            <div class="form-group" style="display:none;">
                <label>Reviewer Notes</label>
                <p id="detailProjectNotes"
                    style="font-size: 14px; line-height: 1.5; color: #1e40af; background: #eff6ff; padding: 12px; border-radius: 6px; border: 1px solid #bfdbfe; margin-top: 5px;">
                </p>
            </div>

            <div class="popup-buttons" style="margin-top: 30px;">
                <button class="popup-cancel" onclick="closePopup('popup-project-details')">Close</button>
                <button class="popup-next" id="detailProjectLinkBtn">Open Project Link</button>
            </div>
        </div>
    </div>


    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <h3>Quick links</h3>
                <ul>
                    <li><a href="index.html#about-section">About</a></li>
                    <li><a href="opport(without acc).html">Opportunities</a></li>
                    <li><a href="FAQ.html">FAQ</a></li>
                </ul>
            </div>

            <div class="footer-right">
                <h3>Evalora</h3>
                <img src="photos/Evaloralogo.png" width="70px">
            </div>
        </div>

        <div class="footer-bottom">
            <p>¬© 2025 Evalora. All Rights Reserved.</p>
        </div>
    </footer>



    <!-- Edit Profile Modal -->
    <div class="popup-overlay" id="popup-edit-profile">
        <div class="popup-box">
            <h2>Edit Profile</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="edit-name" required>
                </div>
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="edit-email" required>
                </div>
                <div class="form-group">
                    <label>University</label>
                    <input type="text" id="edit-university">
                </div>
                <div class="form-group">
                    <label>Major</label>
                    <input type="text" id="edit-major">
                </div>
                <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee;">
                    <h3 style="font-size: 1rem; margin-bottom: 10px;">Change Password (optional)</h3>
                    <div class="form-group">
                        <label>Current Password</label>
                        <input type="password" id="edit-old-password">
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="edit-new-password">
                    </div>
                </div>

                <div class="popup-buttons">
                    <button type="button" class="popup-close" onclick="closePopup('popup-edit-profile')">Cancel</button>
                    <button type="submit" class="popup-next">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Avatar Upload Modal -->
    <div id="avatarModal" class="popup-overlay" style="display: none;">
        <div class="popup-content avatar-modal-box">
            <div class="modal-header">
                <h2>Edit Profile Picture</h2>
                <button class="close-modal"
                    onclick="document.getElementById('avatarModal').style.display='none'">&times;</button>
            </div>

            <div class="cropper-wrapper">
                <div class="cropper-container">
                    <img id="avatarPreview" src="photos/default-avatar.png" alt="Preview">
                </div>
            </div>

            <div class="avatar-actions-grid">
                <button id="selectImageBtn" class="avatar-btn secondary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12" />
                    </svg>
                    Choose New Image
                </button>
                <button id="removeImageBtn" class="avatar-btn danger">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6" />
                    </svg>
                    Remove Photo
                </button>
            </div>

            <div class="modal-footer">
                <button class="btn-cancel"
                    onclick="document.getElementById('avatarModal').style.display='none'">Cancel</button>
                <button id="saveAvatarBtn" class="btn-save">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- ========= POPUP 4: AI SCORE ANALYSIS ========= -->
    <div class="popup-overlay" id="popup-analysis">
        <div class="popup-box analysis-box" style="max-width: 700px; width: 90%;">
            <h2 style="color: #006D77; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" />
                </svg>
                AI Profile Analysis
            </h2>

            <div class="analysis-content" id="analysisContent">
                <!-- Summary Section -->
                <div class="analysis-section">
                    <h4 style="color: #c9a236; margin-bottom: 8px;">Overall Summary</h4>
                    <p id="analysisSummary" style="color: #444; line-height: 1.5; font-size: 0.95rem;"></p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <!-- Strengths -->
                    <div class="analysis-section">
                        <h4 style="color: #2e7d32; margin-bottom: 8px; display: flex; align-items: center; gap: 5px;">
                            <span>‚úì</span> Strengths
                        </h4>
                        <ul id="analysisStrengths" style="padding-left: 20px; color: #444; font-size: 0.9rem;"></ul>
                    </div>
                    <!-- Weaknesses -->
                    <div class="analysis-section">
                        <h4 style="color: #c62828; margin-bottom: 8px; display: flex; align-items: center; gap: 5px;">
                            <span>‚ö†</span> Growth Areas
                        </h4>
                        <ul id="analysisWeaknesses" style="padding-left: 20px; color: #444; font-size: 0.9rem;"></ul>
                    </div>
                </div>

                <!-- Recommendations -->
                <div class="analysis-section"
                    style="margin-top: 20px; background: rgba(0, 109, 119, 0.05); padding: 15px; border-radius: 8px; border-left: 4px solid #006D77;">
                    <h4 style="color: #006D77; margin-bottom: 8px;">AI Recommendations</h4>
                    <ul id="analysisRecommendations"
                        style="padding-left: 20px; color: #004d53; font-weight: 500; font-size: 0.95rem;"></ul>
                </div>
            </div>

            <div class="popup-buttons" style="margin-top: 25px;">
                <button class="popup-next" onclick="closePopup('popup-analysis')" style="width: 100%;">Got it!</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script src="js/custom-alert.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ai.js"></script>
    <script src="JavaScripts/navigation.js"></script>
    <script src="JavaScripts/profile.js?v=3"></script>
    <script src="JavaScripts/forceBackToHome.js"></script>
</body>

</html>